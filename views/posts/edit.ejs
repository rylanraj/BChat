<div class="user_profile_section">
    <div class="section_name">
        <h2>Chat</h2>
        <div class="inbox_display" id="display">
            <% otherUsers.forEach(user => { %>
                <div class="inbox" onclick="Inbox('<%= user.inboxID %>')">
                    <div class="chat_message">
                        <img src="<%= "/" + user.profilePicture %>" alt="pp" width="50" height="50" class="profile_picture">
                        <div class="message_content">
                            <h1><%= user.otherUserName %></h1>
                            <p id="latest<%= user.inboxID %>"><%= user.lastMessage %></p>
                        </div>
                    </div>
                </div>
                <hr style="color:black !important; height: 2px;">
            <% }) %>
        </div>
    </div>
</div>
<div class="user_feed_section">
    <div class="section_name">
        <h2>Edit Post</h2>
        <div class="container">
            <form  action=<%="/post/edit/" + post.PostID%> method="POST" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input style="width: 100% !important; height: 5em !important; border-radius: 12px !important;" type="text" class="form-control" id="titleInput" value="<%=post.Title%>" name="title" maxlength="100">
                </div>
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea style="min-height: 20em !important; border-radius: 12px !important; background-color: #d5dcdc;" class="form-control" id="descriptionInput" rows="3" name="description" maxlength="2500"><%=post.Description%></textarea>
                </div>
                <div class="form-group">
                    <% if (post.Picture) { %>
                        <label style="display: block;">Current Picture</label>
                        <% const editPostPicSrc = /^https?:/i.test(post.Picture) ? post.Picture : ('/' + post.Picture.replace(/^\/+/,'')); %>
                        <img class="post-img" src="<%= editPostPicSrc %>" alt="post_picture" width="400" height="200" style="display: block; margin: auto">
                        <div>
                            <input type="radio" name="removePhoto" value="true">
                            <label style="font-size: 20px;" for="removePhoto">Remove current photo</label>
                        </div>
                    <% } %>
                </div>

                <div style="text-align: center;">
                    <hr style="color:black !important; height: 2px;">
                    <label for="photo" style=" font-size: 1.5REM">New Picture (Optional)</label>
                    
                    <div class="bcit-pic-input">
                        <input type="file" style="display: none;" id="fileInput" name="photo">
                        <label for="fileInput" style="margin-top: 10px; border-radius: 12px ; padding: 5px; color: #f8f9fa; background-color: #007bff;">Choose a picture</label>
                        <span class="file-name" id="fileName">No file chosen</span>
                    </div>
                </div>
                <hr style="color:black !important; height: 2px;">
                <div style="justify-self: start; width: fit-content;"><button type="submit" class="btn btn-default" id="sbmt" style="background-color: #007bff;">Submit</button></div>
            </form>
        </div>
    </div>
</div>
<script>
    document.getElementById('fileInput').addEventListener('change', function() {
        var fileName = this.files[0] ? this.files[0].name : 'No file chosen';
        document.getElementById('fileName').textContent = fileName;
    });
function Inbox(otherInboxID) {
        window.location.href = '/chat/'+otherInboxID;
    }</script>
